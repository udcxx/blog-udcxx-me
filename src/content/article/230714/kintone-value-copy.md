---
title: ãƒ¬ã‚³ãƒ¼ãƒ‰ä¸€è¦§ç”»é¢ã§å€¤ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
date: 2023-07-14
tags: kintone IT
eyecatch:
eyecatchEmoji: ğŸ“‹
description: ãƒ¬ã‚³ãƒ¼ãƒ‰ä¸€è¦§ç”»é¢ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å€¤ã‚’ã‚³ãƒ”ãƒ¼ã§ãã‚‹ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ä½œæˆã—ã¾ã—ãŸã€‚
---

kintoneã§æ–‡å­—åˆ—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›ã•ã‚Œã¦ã„ã‚‹æ–‡ç« ã‚’ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ä¸€è¦§ç”»é¢ã§ã‚³ãƒ”ãƒ¼ã§ãã‚‹ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ä½œã‚Šã¾ã—ãŸã€‚

kintoneã«ç™»éŒ²ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’é »ç¹ã«ã‚³ãƒ”ãƒ¼ã—ã¦åˆ¥ã®ã¨ã“ã‚ã«ãƒšãƒƒã™ã‚‹ç°¡å˜ãªãŠä»•äº‹ãŒçµæ§‹ãªé »åº¦ã§ã‚ã‚‹ã®ã§ã™ãŒã€çŸ­ã„æ–‡ç« ã§ã‚ã‚Œã°ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ä¸€è¦§ç”»é¢ã‹ã‚‰ã‚³ãƒ”ãƒ¼ã§ãã‚‹ã‚‚ã®ã®ã€ã‚ã‚‹ç¨‹åº¦é•·ã„æ–‡ç« ã«ãªã‚‹ã¨ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹ã‹ã€ãƒ¬ã‚³ãƒ¼ãƒ‰è©³ç´°ç”»é¢ã‚’é–‹ã‹ãªã„ã¨æ–‡ç« å…¨ä½“ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã“ã¨ãŒã§ããªãã¦ã€å°‘ã€…æ‰‹é–“ã§ã—ãŸã€‚

ãã“ã§ã€ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼ã§ãã‚‹ã‚ˆã†ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ä½œæˆã—ã¾ã—ãŸã€‚

## ä»•æ§˜

ãƒ¬ã‚³ãƒ¼ãƒ‰ä¸€è¦§ç”»é¢ã§æ¬¡ã®å‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

* æŒ‡å®šã—ãŸæ–‡å­—åˆ—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®åˆ—ã«ã€Œã‚³ãƒ”ãƒ¼ã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹
* ã€Œã‚³ãƒ”ãƒ¼ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã®è¡Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ç•ªå·ã‚’ä½¿ã£ã¦ãƒ¬ã‚³ãƒ¼ãƒ‰å–å¾—APIã‚’å©ã„ã¦ã€æ–‡å­—åˆ—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ä¿å­˜ã™ã‚‹

ã¡ã‚‡ã£ã¨é›‘ã«ä½œã£ãŸéƒ¨åˆ†ãŒã‚ã£ã¦ã€ä¾‹ãˆã°ãƒ¬ã‚³ãƒ¼ãƒ‰ä¸€è¦§ç”»é¢ä¸Šã«ãƒ¬ã‚³ãƒ¼ãƒ‰ç•ªå·ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¦ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚ã»ã‹ã«ã‚‚ç©´ãŒã‚ã‚‹ã‹ã‚‚ã€‚ã”æ³¨æ„ã‚’...ã€‚


## ã‚³ãƒ¼ãƒ‰

ã©ã“ã§ãªã«ã‚’ã—ã¦ã‚‹ã‹ã¯ã€ã‚³ãƒ¡ãƒ³ãƒˆã§ç°¡å˜ã«èª¬æ˜ã—ã¦ã¾ã™ã€‚

`textFieldCode` ã¯ã€ã‚³ãƒ”ãƒ¼ã—ãŸã„æ–‡å­—åˆ—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ã¦ã‚ã’ã¦ãã ã•ã„ã€‚ãƒ¬ã‚³ãƒ¼ãƒ‰ç•ªå·ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¬ã‚³ãƒ¼ãƒ‰ç•ªå·ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### JavaScript

```javascript
kintone.events.on(['app.record.index.show'], () => {
    const fieldsList = cybozu.data.page.FORM_DATA.schema.table.fieldList;

    // æ–‡å­—åˆ—ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’æŒ‡å®š
    const textFieldCode = "TEXT";

    let recordField = "";
    let textField = "";

    // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å¯¾å¿œã™ã‚‹Classåã‚’æ¢ã—å‡ºã™
    for (let fieldList in fieldsList) {
        if (fieldsList[fieldList].var === 'ãƒ¬ã‚³ãƒ¼ãƒ‰ç•ªå·') {
            recordField = fieldsList[fieldList].id;

        } else if (fieldsList[fieldList].var === textFieldCode) {
            textField = fieldsList[fieldList].id;

        }
    }

    // æˆåŠŸæ™‚ã«è¡¨ç¤ºã™ã‚‹ãƒˆãƒ¼ã‚¹ãƒˆ
    let toastEl = document.createElement('div');
    toastEl.innerHTML = 'âœ… ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ';
    toastEl.classList.add('copy_toast');
    toastEl.classList.add('sccess');
    toastEl.classList.add('hidden');
    document.querySelector('body').appendChild(toastEl);

    // å¤±æ•—æ™‚ã«è¡¨ç¤ºã™ã‚‹ãƒˆãƒ¼ã‚¹ãƒˆ
    let toastErrEl = document.createElement('div');
    toastErrEl.innerHTML = 'ğŸ˜­ å¤±æ•—ã—ã¾ã—ãŸ';
    toastErrEl.classList.add('copy_toast');
    toastErrEl.classList.add('err');
    toastErrEl.classList.add('hidden');
    document.querySelector('body').appendChild(toastErrEl);

    const textFieldAreas = document.querySelectorAll(`.value-${textField}`);

    // ä¸€è¦§ç”»é¢ä¸Šã®æ–‡å­—åˆ—ã™ã¹ã¦ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¨­ç½®
    textFieldAreas.forEach(textFieldArea => {
        textFieldArea.classList.add('relative');

        // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³
        let btnEl = document.createElement('div');
        btnEl.innerHTML = 'ğŸ“‹ ã‚³ãƒ”ãƒ¼';
        btnEl.classList.add('copy_button');
        textFieldArea.appendChild(btnEl);

        // è©²å½“è¡Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ç•ªå·å–å¾—
        const span = textFieldArea.parentNode.querySelector(`.value-${recordField} > div > span`);
        const recordId = span ? span.innerHTML : 0;

        // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‹•ä½œ
        btnEl.addEventListener('click', () => {
            const body = {
                app: kintone.app.getId(),
                id: recordId
            };

            // æ–‡å­—åˆ—ã®å€¤ã‚’å–å¾—
            kintone.api(kintone.api.url('/k/v1/record.json', true), 'GET', body, (resp) => {
                // å–å¾—æˆåŠŸ
                // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸æ–‡å­—åˆ—ã®å€¤ã‚’ä¿å­˜
                navigator.clipboard.writeText(resp.record[textFieldCode].value);

                // æˆåŠŸç”¨ãƒˆãƒ¼ã‚¹ãƒˆè¡¨ç¤º
                const toast = document.querySelector('.copy_toast.sccess');
                toast.classList.remove('hidden');
                toast.classList.add('view');
                setTimeout(function() {
                    toast.classList.remove('view');
                    toast.classList.add('hidden');
                }, 3000);

            }, (error) => {
                // å–å¾—å¤±æ•—
                // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ã‚¨ãƒ©ãƒ¼è©³ç´°è¡¨ç¤º
                console.log(error);

                // å¤±æ•—ç”¨ãƒˆãƒ¼ã‚¹ãƒˆè¡¨ç¤º
                const toast = document.querySelector('.copy_toast.err');
                toast.classList.remove('hidden');
                toast.classList.add('view');
                setTimeout(function() {
                    toast.classList.remove('view');
                    toast.classList.add('hidden');
                }, 3000);

            });
        })
    });

});
```


### CSS

```css
@charset 'UTF-8';

.relative {
    position: relative;
}

div.copy_button {
    padding: 3px 8px;
    position: absolute;
    top: 50%; right: 20px;
    transform: translateY(-50%);
    border-radius: 5px;
    opacity: 1;
    transition: background-color 0.5s;
    background-color: #3497DB;
    border: 1px solid #4D49A6;
    color: #fff;
    cursor: pointer;
}

div.copy_button:hover {
    background-color: #007399;
}

div.copy_toast {
    width: 200px;
    padding: 3px 8px;
    margin: 0 auto;
    position: fixed;
    top: 50px; left: 0; right: 0; z-index: 100;
    text-align: center;
    color: #fff;
    visibility: visible;
    border-radius: 5px;
    background-color: #3497DB;
    border: 1px solid #4D49A6;
}

div.copy_toast.err {
    background-color: #E74C3C;
    border: 1px solid #9B1305;
}

div.copy_toast.hidden {
    visibility: hidden;
    opacity: 0;
}

div.copy_toast.view {
    animation: fadeInOut 3s 0s forwards;
}


@keyframes fadeInOut {
    0% {
        opacity: 0;
    }

    10%, 90% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}
```

---

å¯¾è±¡ã®æ–‡å­—åˆ—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é¸æŠã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŒ–ã—ã¦ [ã“ã“](https://udcxx.stores.jp/) ã§è²©å£²ã—ã‚ˆã†ã‹ã¨æ€ã„ã¾ã—ãŸãŒè…°ãŒé‡ã‹ã£ãŸã®ã§ãƒ–ãƒ­ã‚°ã«è¼‰ã›ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚æ°—ãŒå‘ã„ãŸã‚‰ã‚„ã‚ã†ã‹ãªã€‚