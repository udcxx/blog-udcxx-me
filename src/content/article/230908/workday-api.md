---
title: 営業日数APIを公開しました
date: 2023-09-08
tags: IT
eyecatch: 
eyecatchEmoji: 🎉
description: 営業日の日数などを返してくれるAPIを公開しました
---

こんにちは、だいちゃんです。

営業日の日数を取得するAPIを公開しました！

[営業日数API](https://app.udcxx.me/document/workday-api/)

## 具体例

2023年9月の営業日数を取得したい場合、次のURLにGETリクエストを投げます。

[https://app.udcxx.me/api/workday/?y=2023&m=9&c=work](https://app.udcxx.me/api/workday/?y=2023&m=9&c=work)

そうすると、次のようなレスポンスが帰ってきます。

```
20
```

また、 `c` パラメーターを省略することで、2023年9月の日数に関するいろいろな情報を一度に取得できます。

**リクエストURL**

[https://app.udcxx.me/api/workday/?y=2023&m=9](https://app.udcxx.me/api/workday/?y=2023&m=9)

**レスポンス例**

```
{
    "day": 30,
    "weekendday": 9,
    "holiday": 2,
    "weekend_and_holiday": 10,
    "weekday": 20,
    "workday": 20,
    "estimated": "FALSE"
}
```

そのほかの詳細な仕様は、 [ドキュメント](https://app.udcxx.me/document/workday-api/) をご参照ください。

また、kintoneに組み込むサンプルは、noteの方に書いたので、そちらもご覧いただけますと🙏

[営業日の日数を返すだけのAPIを公開しました｜だいちゃん](https://note.com/udcxx/n/n8362f0f6b642)


## 概要

月ごとの営業日や祝日の日数を予め計算したJSONファイルを用意していて、リクエストに応じて必要なデータだけに成形して返す仕組みになっています。

JSONファイルの生成にあたっては、Google SpredSheetで関数をゴリゴリ使って計算させています。使った関数の具体例とかは、長くなりそうなので別途記事にしようと思っています。

リクエストのタイミングで計算させる手もあるかもしれないのですが、計算済みのデータを用意しておくことで、レスポンスの速度が上がるのではないかという思惑と、PHPが苦手なのでなるべくPHP側での処理を少なくしたかったというのが本音ですw


## 背景

kintoneで、月ごとの対応件数を記録するアプリを作っていて、1日あたりの件数を計算するために、営業日の日数を入力するフィールドを用意しているのですが、そのフィールドに入れる値を数えるのが手間なので、自動化する術を考えていました。

祝日数が取得できれば計算できるなぁと思いつつ、別のkintoneアプリや、ほかのシステムからも利用できるようにしておけば将来的に助かるかもしれないと思い、APIとして公開することにしました。

---

シンプルなものではありますが、初めてのAPI公開にあたって、いろいろと勉強になった部分もあったので、徐々に記事として残していきたい...です。